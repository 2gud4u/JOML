group = 'org.joml'
version = '1.9.0-SNAPSHOT'

apply plugin: "java"
apply plugin: 'com.github.johnrengelman.shadow'

archivesBaseName = 'joml'

sourceCompatibility = 1.4
targetCompatibility = 1.4
sourceSets {
  main.java.srcDir 'src'
  test.java.srcDir 'test'
}

buildscript {
  repositories {
    jcenter()
  }
  dependencies {
    classpath 'com.github.jengelman.gradle.plugins:shadow:1.2.3'
  }
}
repositories {
  mavenCentral()
}
dependencies {
  testCompile group: 'junit', name: 'junit', version: '3.8.2'
  compile group: 'org.ow2.asm', name: 'asm', version: '5.1'
}

shadowJar {
   relocate 'org.objectweb', 'org.joml.objectweb'
}

task sourcesJar(type: Jar, dependsOn: classes) {
  classifier = 'sources'
  from sourceSets.main.allSource
}
task javadocJar(type: Jar, dependsOn: javadoc) {
  classifier = 'javadoc'
  from javadoc.destinationDir
}
task all(dependsOn: [shadowJar, sourcesJar, javadocJar])
defaultTasks 'all'
